Import('env')

includes = [
    'include',
    'include/cmsis'
]

sources = [
    'error/nrf_fault.c',
    'error/nrf_assert.c',
    'error/nrf_error.c',
]

if env['MCU'].startswith('NRF51'):
    sources.append('mcu/system_nrf51.c')

elif env['MCU'].startswith('NRF52'):
    sources.append('mcu/system_nrf52.c')


env.Append(CPPPATH=includes)

if 'CMock' in env['BUILDERS']:
    env.CMock(source = ['include/nrf_assert.h', 'include/nrf_error.h'])

if 'Library' in env['BUILDERS']:
    env.Library(
        target = 'core',
        source = sources
    )

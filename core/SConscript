Import('env')

includes = [
    '#core/include',
    '#core/include/cmsis',
    '#core/include/mcu'
]
env.Append(CPPPATH=includes)

if env['type'] == 'unittest':
    env.addCMock(Glob('include/*.h'))

sources = list()
for module in ['mcu', 'error']:
    sources.append(SConscript(module + '/SConscript',      exports=['env']))

if env['type'] == 'build':
    env.addLibrary(
        target = 'core',
        source = sources
    )

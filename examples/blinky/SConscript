import os
Import('env')

sources = [
    "main.c",
    env['source']['core']
]

libs = [
    env['lib']['core']
]

if env['MCU'].startswith('NRF51'):
    if 'armgcc' in env['TOOLS']:
        env['LINKFLAGS'] += ['-T'+os.path.realpath(Dir('#/examples/blinky').abspath+'/blinky_gcc_nrf51.ld')]
    if 'keilv5' in env['TOOLS']:
        env['LINKFLAGS'] += ['--scatter='+os.path.realpath(Dir('#/examples/blinky').abspath+'/nrf51422_xxaa.sct')]

env.Hex(target = 'blinky', source = sources, lib=libs)
env.Project(target = 'blinky', source = sources)# + libs)